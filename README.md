# Лабораторная работа 2

## Задание лабораторной работы

1. Объявила переменную `a=$*`, в которую записываются параметры из командной строки:
   ```bash
   #!/bin/bash

   a=$*
   ```
2. Объявила переменную `m`, в которую записала введенные значения, изменив **разделитель-точку** на **резделитель-пробел**:
   ```bash
   m=$(echo $a | sed 's/\./ /g')
   ```
3. Написала функцию `check_ip` для проверки корректности введенного IP адреса. Данная функция состоит из 3-х блоков:
   - в первой условной конструкции с помощью регулярного выражения `^[0-9]$` проверяется, что все введенные символы являются числовыми;
   - во второй условной конструкции с помощью регулярного выражения `^0[0-9]$` проверяется, введены ли октеты, начинающиеся с нуля (однако если октет представляет собой число 0, то это не является некорректным, исключая расположение на первой позиции IP адреса);
   - в третьей условной конструкции проверяется, входят ли введенные октеты в диапазон от 0 до 255 включительно с обеих сторон;
   ```bash
   function check_ip {
   	k=$1
   	re='^[0-9]+$'
   	if ! [[ $k =~ $re ]]; then
   		echo "The IP is incorrect. Try again."
   	       	exit 1
   	fi
   	
   	re='^0[0-9]+$'
   	if [[ $k =~ $re ]]; then
   		echo "The IP is incorrect. Try again."
   		exit 1
   	fi
   	
   	if ! [[ $k -le 255  &&  $k -ge 0  ]]; then
   		echo "This IP doesn't exist. Try again."
   		exit 1
   	fi
   }
   ```
   В случае попадания в один из блоков, программа завершается с **кодом выхода 1**.

4. Для проверки введенных значений написала цикл `for`, перед началом корторого инициализировала переменную `f=1`, которая необходима для определения первого октета и проверки его на то, что он состоит не из 0:
   ```bash
   f=1
   for a in $m; do
   	check_ip $a
   	if [ $a -eq 0 ] && [ $f -eq 1 ]; then
   		echo "Incorrect IP-adress. Try again."
   		exit 1
   	fi
   	let f+=1
   done
   ```
5. Для перевода из десятичной системы в двоичную написала функцию `to_binary`. В первой условной конструкции здесь октет, переданный в переменную `p`, переводится в двоичную систему исчисления, и результат записывается в переменную `n` в обратном порядке. Во второй условной конструкции октет приводится к стандартному виду (добавляются нули до длины октета в **8 знаков**) и выводится в необходимом порядке.
   ```bash
   function to_binary {
   	p=$1
   	local n
   	if [ $p -eq 0 ]; then
   		n="0"
   	else
   		while [ `expr $p / 2` -ge 1 ]; do
   			n="$n`expr $p % 2`"
   			let "p = $p/2"
   			if [ $p -eq 1 ]; then
   				n="$n$p"
   				break
   			fi
   		done
   	fi
   
   	if [ ${#n} -eq 8 ]; then
   		echo $n | rev
   	else
   		nol=`expr 8 - ${#n}`
   		#echo "$nol zeros required"
   		for ((h=1; h<=$nol; h++)); do
   			n="${n}0"
   		done
   		echo $n | rev
   	fi
   }
   ```
